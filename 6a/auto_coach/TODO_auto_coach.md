# TODO_auto_coach - 待办事项清单

## 🚀 立即可以做的事情

### 1. 启动系统
```bash
# 进入项目目录
cd src/coach

# 安装依赖
pip install -r requirements.txt

# 启动主程序
python main.py
```

### 2. 测试MCP工具
- 重启Cursor
- 在对话中测试工具调用
- 验证6个MCP工具是否可用

### 3. 测试Overlay界面
- 检查热键是否响应
- 验证截图功能
- 测试透明度调整

## ⚙️ 需要配置的事项

### 1. Python环境
- [ ] 确认Python 3.8+已安装
- [ ] 安装所有依赖包
- [ ] 验证OpenCV是否正常工作

### 2. 游戏环境
- [ ] 确认炉石战棋已安装
- [ ] 设置游戏分辨率为1920x1080
- [ ] 准备游戏画面用于测试

### 3. 权限设置
- [ ] 以管理员权限运行（截图功能需要）
- [ ] 检查防火墙设置
- [ ] 确认端口8000未被占用

## 🔧 可能需要调整的配置

### 1. ROI坐标调整
如果识别不准确，可能需要调整 `src/coach/recognition_engine.py` 中的ROI坐标：

```python
self.rois = {
    "shop": (400, 200, 800, 400),      # 商店区域
    "board": (400, 600, 800, 300),     # 我方场面
    "hero": (100, 800, 200, 200),      # 英雄区域
    "gold": (1600, 800, 100, 50),      # 金币区域
    "tavern_tier": (1600, 700, 100, 50), # 酒馆等级
    "turn": (1600, 600, 100, 50),      # 回合数
}
```

### 2. 识别频率调整
在 `src/coach/main.py` 中调整识别频率：

```python
time.sleep(0.1)  # 100ms间隔，可调整为0.05-0.2
```

### 3. 服务端口调整
在 `src/coach/websocket_service.py` 中调整端口：

```python
uvicorn.run(app, host="127.0.0.1", port=8000)
```

## 📋 功能测试清单

### 基础功能测试
- [ ] 系统启动正常
- [ ] 识别引擎加载成功
- [ ] WebSocket服务启动
- [ ] Overlay界面显示

### MCP工具测试
- [ ] get_game_state - 获取游戏状态
- [ ] get_recognition_status - 获取服务状态
- [ ] get_game_advice - 获取游戏建议
- [ ] analyze_board - 分析场面
- [ ] start_recognition - 启动识别
- [ ] stop_recognition - 停止识别

### Overlay功能测试
- [ ] F8 - 显示/隐藏面板
- [ ] F9 - 显示示例建议
- [ ] F10 - 保存截图
- [ ] F7 - 切换位置
- [ ] F6 - 调整透明度
- [ ] Esc - 退出系统

## 🐛 常见问题解决

### 1. 识别不准确
**问题**: 随从或英雄识别错误
**解决**: 
- 检查游戏分辨率是否为1920x1080
- 调整ROI坐标
- 确认模板图片完整

### 2. 服务启动失败
**问题**: WebSocket服务无法启动
**解决**:
- 检查端口8000是否被占用
- 确认依赖安装完整
- 检查防火墙设置

### 3. Overlay不显示
**问题**: 界面无法显示
**解决**:
- 以管理员权限运行
- 检查显示器缩放设置
- 确认tkinter正常工作

### 4. MCP工具不工作
**问题**: Cursor无法调用工具
**解决**:
- 检查 `.cursor/mcp.json` 配置
- 重启Cursor
- 验证Python路径正确

## 📚 文档和资源

### 已完成的文档
- [x] 项目主README
- [x] MCP配置说明
- [x] 6A工作流文档
- [x] 项目总结报告

### 需要参考的资源
- [ ] 炉石战棋游戏数据
- [ ] OpenCV文档
- [ ] FastAPI文档
- [ ] MCP协议规范

## 🎯 下一步计划

### 短期目标（1-2周）
1. **系统测试**: 完整测试所有功能
2. **性能优化**: 调整识别精度和速度
3. **用户体验**: 优化Overlay界面
4. **文档完善**: 补充使用教程

### 中期目标（1-2月）
1. **OCR集成**: 添加数字识别功能
2. **策略优化**: 改进游戏建议算法
3. **多分辨率**: 支持不同游戏分辨率
4. **错误处理**: 增强异常处理机制

### 长期目标（3-6月）
1. **AI集成**: 机器学习模型
2. **多游戏**: 扩展到其他游戏
3. **云端服务**: 提供在线服务
4. **社区版本**: 开源发布

## 📞 技术支持

### 联系方式
- **项目文档**: `docs/` 目录
- **配置说明**: `docs/mcp-setup.md`
- **故障排除**: 查看各模块的错误日志

### 调试方法
1. **查看控制台输出**: 运行时的错误信息
2. **检查日志文件**: 系统运行日志
3. **测试独立模块**: 单独运行各个组件
4. **验证环境配置**: Python、依赖、权限等

## ✨ 项目亮点

### 技术特色
- 完整的图像识别解决方案
- 实时数据推送服务
- 标准MCP协议集成
- 模块化架构设计

### 用户体验
- 一键启动系统
- 热键控制界面
- 智能游戏建议
- 实时状态显示

---

**最后更新**: 2024年1月  
**项目状态**: 🎉 开发完成，等待测试和部署
